# 카카오 로그인 문제 해결 가이드

## 1. .env 파일 확인

프로젝트 루트에 `.env` 파일이 있고 다음 내용이 있는지 확인하세요:

```env
PORT=3001
KAKAO_CLIENT_ID=17fc495b849b38e42037418cd4be5759
KAKAO_CLIENT_SECRET=UdJ5jN4LbKPrYPrEAxBUdVd8Qw4mO8AJ
```

⚠️ **중요**: 파일 저장 후 서버를 재시작해야 합니다!

## 2. 서버 실행 확인

서버가 실행 중인지 확인하세요:

```bash
npm run server
```

서버 콘솔에서 다음 메시지를 확인:
```
서버가 포트 3001에서 실행 중입니다.
카카오 CLIENT_ID: 17fc495b849b38e42037418cd4be5759
```

⚠️ 경고 메시지가 나타나면 `.env` 파일이 제대로 읽히지 않는 것입니다.

## 3. 카카오 개발자 센터 설정 확인

### Redirect URI 확인
1. https://developers.kakao.com 접속
2. 내 애플리케이션 선택
3. "제품 설정" → "카카오 로그인"
4. Redirect URI에 다음이 등록되어 있는지 확인:
   ```
   http://localhost:5173/login
   ```
   ⚠️ 정확히 일치해야 합니다 (슬래시, http/https 모두 확인)

### 카카오 로그인 활성화 확인
- "활성화 설정"이 **ON**인지 확인

### 동의 항목 설정 확인
- "동의항목" 탭에서 필요한 정보 동의 설정
  - 닉네임 (필수)
  - 프로필 사진 (선택)
  - 이메일 (선택)

## 4. 브라우저 콘솔 확인

브라우저 개발자 도구(F12) → Console 탭에서 에러 메시지 확인:

### 자주 발생하는 에러들:

1. **"서버에 연결할 수 없습니다"**
   - 서버가 실행 중인지 확인
   - `http://localhost:3001/api/health` 접속하여 서버 상태 확인

2. **"카카오 API 키가 설정되지 않았습니다"**
   - `.env` 파일 확인
   - 서버 재시작

3. **"redirect_uri_mismatch"**
   - 카카오 개발자 센터의 Redirect URI와 일치하는지 확인
   - 정확히 `http://localhost:5173/login` 이어야 함

4. **"invalid_client"**
   - KAKAO_CLIENT_ID 또는 KAKAO_CLIENT_SECRET이 잘못됨
   - `.env` 파일 확인

## 5. 테스트 단계별 확인

### 1단계: 인증 URL 생성 확인
- 브라우저 콘솔에서 "카카오톡 인증 URL 요청" 로그 확인
- URL에 `client_id`가 포함되어 있는지 확인

### 2단계: 카카오 로그인 페이지 확인
- 카카오 로그인 페이지가 열리는지 확인
- 로그인 후 리다이렉트가 되는지 확인

### 3단계: 콜백 처리 확인
- URL에 `code` 파라미터가 있는지 확인
- 서버 콘솔에서 에러 메시지 확인

## 6. 서버 로그 확인

서버 터미널에서 에러 메시지를 확인하세요. 자세한 에러 정보가 출력됩니다.

## 7. 빠른 확인 체크리스트

- [ ] `.env` 파일에 KAKAO_CLIENT_ID와 KAKAO_CLIENT_SECRET 설정
- [ ] 서버 재시작 (`npm run server`)
- [ ] 서버가 포트 3001에서 실행 중
- [ ] 카카오 개발자 센터에 Redirect URI 등록: `http://localhost:5173/login`
- [ ] 카카오 로그인 활성화 설정 ON
- [ ] 브라우저에서 `http://localhost:5173/login` 접속
- [ ] 브라우저 콘솔에서 에러 확인

## 8. 디버깅 방법

브라우저 콘솔에서 다음 명령으로 테스트:

```javascript
// 서버 연결 확인
fetch('http://localhost:3001/api/health')
  .then(r => r.json())
  .then(console.log);

// 카카오 인증 URL 생성 테스트
fetch('http://localhost:3001/api/kakao/auth-url?redirect_uri=http://localhost:5173/login')
  .then(r => r.json())
  .then(console.log);
```

문제가 계속되면 서버 콘솔과 브라우저 콘솔의 에러 메시지를 확인하여 알려주세요.







